

GET http://localhost:8080/api/greeting HTTP/1.1
content-type: application/json

###


GET http://localhost:8080/api/me HTTP/1.1
content-type: application/json
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6ImtnMkxZczJUMENUaklmajRydDZKSXluZW4zOCJ9.eyJhdWQiOiJhZTBhNWI2ZS01MTkwLTRhNTItYmMzMC02Zjg2NDVhNWYyNjIiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vM2ZkMTFlODUtZDhjZS00YzdmLWI2YTAtODE2MzQ2NjE1Nzc3L3YyLjAiLCJpYXQiOjE2MDI0OTMyMTcsIm5iZiI6MTYwMjQ5MzIxNywiZXhwIjoxNjAyNDk3MTE3LCJhaW8iOiJBVFFBeS84UkFBQUFGOTlqNCszdWhzeTBKaHhIT25Lc1oyUXo5dFloTXZIUDNBREFqVlBqY0gwYkFLY3BnNDJUMVoxZFdKWXZuVnZOIiwiYXpwIjoiOWIyMzI3YTUtYTVmOS00Njc0LThhZmMtYWVhOTJiNTE0NTIyIiwiYXpwYWNyIjoiMCIsIm5hbWUiOiJUaW1vIENsYWVzc2VucyIsIm9pZCI6IjExYmM3OTIyLTI3MzctNGRlYy1hOTVjLWE3M2Y2ZWQxOTYyZCIsInByZWZlcnJlZF91c2VybmFtZSI6InRpbW9AeHN0b2YueHl6IiwicmgiOiIwLkFSb0FoUjdSUDg3WWYweTJvSUZqUm1GWGQ2VW5JNXY1cFhSR2l2eXVxU3RSUlNJaEFPTS4iLCJyb2xlcyI6WyJzdGFmZiJdLCJzY3AiOiJyZWFkIHdyaXRlIiwic3ViIjoiR09JNnBHdVluOVFRbkRyMjJQUkdPM2NMdXNNcDN5dnQ0Mmg3Y1lEQ05pWSIsInRpZCI6IjNmZDExZTg1LWQ4Y2UtNGM3Zi1iNmEwLTgxNjM0NjYxNTc3NyIsInV0aSI6IjVpWDdIZVpFOTBHUHhJQnlDT28yQUEiLCJ2ZXIiOiIyLjAifQ.Jyxn5RgDbG4WKfsbndusjJ25zhC7ktCOy3_7BivDfLlfe1-zYAGh4UNVu-EJP9jusu2VbKlrZBrV2lpvW8iyKPnN-QmzRrd5y1-QhwRbOL668bTPWzCTeAyP0Qypt2FILYaWiUVnl4lygzmkjSxRkcV18No8JPTVVTbi8qCBi_gS9sG0gLHh2WiP3v2eUIb8BBFneT-mU3XpHx-Twi-GuR0anyB88nr1W-WHdNxcOXd2T-sPWYellG8x12UFki5vtrLt8ponLD6SaU02q9lH6frU0NgkcnnxzT0p0MimujRQO_SHQx_kUU7gDSMID1z6ZYUeEuMApMpLMh6zvDI_MA

###

GET http://localhost:8080/api/foo HTTP/1.1
content-type: application/json
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6ImtnMkxZczJUMENUaklmajRydDZKSXluZW4zOCJ9.eyJhdWQiOiJhZTBhNWI2ZS01MTkwLTRhNTItYmMzMC02Zjg2NDVhNWYyNjIiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vM2ZkMTFlODUtZDhjZS00YzdmLWI2YTAtODE2MzQ2NjE1Nzc3L3YyLjAiLCJpYXQiOjE2MDI0OTMyMTcsIm5iZiI6MTYwMjQ5MzIxNywiZXhwIjoxNjAyNDk3MTE3LCJhaW8iOiJBVFFBeS84UkFBQUFGOTlqNCszdWhzeTBKaHhIT25Lc1oyUXo5dFloTXZIUDNBREFqVlBqY0gwYkFLY3BnNDJUMVoxZFdKWXZuVnZOIiwiYXpwIjoiOWIyMzI3YTUtYTVmOS00Njc0LThhZmMtYWVhOTJiNTE0NTIyIiwiYXpwYWNyIjoiMCIsIm5hbWUiOiJUaW1vIENsYWVzc2VucyIsIm9pZCI6IjExYmM3OTIyLTI3MzctNGRlYy1hOTVjLWE3M2Y2ZWQxOTYyZCIsInByZWZlcnJlZF91c2VybmFtZSI6InRpbW9AeHN0b2YueHl6IiwicmgiOiIwLkFSb0FoUjdSUDg3WWYweTJvSUZqUm1GWGQ2VW5JNXY1cFhSR2l2eXVxU3RSUlNJaEFPTS4iLCJyb2xlcyI6WyJzdGFmZiJdLCJzY3AiOiJyZWFkIHdyaXRlIiwic3ViIjoiR09JNnBHdVluOVFRbkRyMjJQUkdPM2NMdXNNcDN5dnQ0Mmg3Y1lEQ05pWSIsInRpZCI6IjNmZDExZTg1LWQ4Y2UtNGM3Zi1iNmEwLTgxNjM0NjYxNTc3NyIsInV0aSI6IjVpWDdIZVpFOTBHUHhJQnlDT28yQUEiLCJ2ZXIiOiIyLjAifQ.Jyxn5RgDbG4WKfsbndusjJ25zhC7ktCOy3_7BivDfLlfe1-zYAGh4UNVu-EJP9jusu2VbKlrZBrV2lpvW8iyKPnN-QmzRrd5y1-QhwRbOL668bTPWzCTeAyP0Qypt2FILYaWiUVnl4lygzmkjSxRkcV18No8JPTVVTbi8qCBi_gS9sG0gLHh2WiP3v2eUIb8BBFneT-mU3XpHx-Twi-GuR0anyB88nr1W-WHdNxcOXd2T-sPWYellG8x12UFki5vtrLt8ponLD6SaU02q9lH6frU0NgkcnnxzT0p0MimujRQO_SHQx_kUU7gDSMID1z6ZYUeEuMApMpLMh6zvDI_MA
#Authorization: {{$aadV2Token 3fd11e85-d8ce-4c7f-b6a0-816346615777}}

###

POST http://localhost:8080/api/foo HTTP/1.1
content-type: application/json
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6ImtnMkxZczJUMENUaklmajRydDZKSXluZW4zOCJ9.eyJhdWQiOiJhZTBhNWI2ZS01MTkwLTRhNTItYmMzMC02Zjg2NDVhNWYyNjIiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vM2ZkMTFlODUtZDhjZS00YzdmLWI2YTAtODE2MzQ2NjE1Nzc3L3YyLjAiLCJpYXQiOjE2MDI0OTMyMTcsIm5iZiI6MTYwMjQ5MzIxNywiZXhwIjoxNjAyNDk3MTE3LCJhaW8iOiJBVFFBeS84UkFBQUFGOTlqNCszdWhzeTBKaHhIT25Lc1oyUXo5dFloTXZIUDNBREFqVlBqY0gwYkFLY3BnNDJUMVoxZFdKWXZuVnZOIiwiYXpwIjoiOWIyMzI3YTUtYTVmOS00Njc0LThhZmMtYWVhOTJiNTE0NTIyIiwiYXpwYWNyIjoiMCIsIm5hbWUiOiJUaW1vIENsYWVzc2VucyIsIm9pZCI6IjExYmM3OTIyLTI3MzctNGRlYy1hOTVjLWE3M2Y2ZWQxOTYyZCIsInByZWZlcnJlZF91c2VybmFtZSI6InRpbW9AeHN0b2YueHl6IiwicmgiOiIwLkFSb0FoUjdSUDg3WWYweTJvSUZqUm1GWGQ2VW5JNXY1cFhSR2l2eXVxU3RSUlNJaEFPTS4iLCJyb2xlcyI6WyJzdGFmZiJdLCJzY3AiOiJyZWFkIHdyaXRlIiwic3ViIjoiR09JNnBHdVluOVFRbkRyMjJQUkdPM2NMdXNNcDN5dnQ0Mmg3Y1lEQ05pWSIsInRpZCI6IjNmZDExZTg1LWQ4Y2UtNGM3Zi1iNmEwLTgxNjM0NjYxNTc3NyIsInV0aSI6IjVpWDdIZVpFOTBHUHhJQnlDT28yQUEiLCJ2ZXIiOiIyLjAifQ.Jyxn5RgDbG4WKfsbndusjJ25zhC7ktCOy3_7BivDfLlfe1-zYAGh4UNVu-EJP9jusu2VbKlrZBrV2lpvW8iyKPnN-QmzRrd5y1-QhwRbOL668bTPWzCTeAyP0Qypt2FILYaWiUVnl4lygzmkjSxRkcV18No8JPTVVTbi8qCBi_gS9sG0gLHh2WiP3v2eUIb8BBFneT-mU3XpHx-Twi-GuR0anyB88nr1W-WHdNxcOXd2T-sPWYellG8x12UFki5vtrLt8ponLD6SaU02q9lH6frU0NgkcnnxzT0p0MimujRQO_SHQx_kUU7gDSMID1z6ZYUeEuMApMpLMh6zvDI_MA

{}

# validations:
# - works: validates issuer
# - works: validates 'write' scope when doing: .antMatchers(HttpMethod.GET, "/foo").hasAnyAuthority("SCOPE_write")
# - works: validate token expiration and validate token not before
# - works: validates role => once configure to support roles
# - works: validates audience => once configured to support audience validation (which is not by default)

# resources:
# - https://docs.spring.io/spring-security/site/docs/5.4.1/reference/html5/#oauth2resourceserver-jwt-authorization-extraction
